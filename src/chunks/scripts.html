<!--Include Scripts-->
<script defer src="https://use.fontawesome.com/releases/v5.14.0/js/all.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/ScrollToPlugin.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/MotionPathPlugin.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/CSSRulePlugin.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {

    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    if ($navbarBurgers.length > 0) {

    $navbarBurgers.forEach( el => {
        el.addEventListener('click', () => {

        const target = el.dataset.target;
        const $target = document.getElementById(target);
        var navItem = document.getElementsByClassName('toggle');

        for(var i = 0; i < navItem.length; i++) {
            navItem[i].classList.toggle('navbar-item-dark');
        };
        
        el.classList.toggle('is-active');
        $target.classList.toggle('is-active'); 
        
        });
    });

    } 

    });

</script>

<script>    
    var tl = gsap.timeline();
    var tl2 = gsap.timeline();
    var tl3 = gsap.timeline();
    var tl4 = gsap.timeline();

    gsap.registerPlugin(ScrollTrigger);
    gsap.registerPlugin(MotionPathPlugin);
    gsap.registerPlugin(CSSRulePlugin);

  //  gsap.from(".img-sensor", 4, {y: 20, y: -20});        
    gsap.from(".text-light", 2, {opacity: 0, y:-25, delay: 2});
    gsap.from(".text-colored", 2, {opacity: 0, y:-25, delay: 4});
    gsap.from(".arrow_down", 5, {ease: Elastic.easeOut.config(2, 0.2), y:-5, duration: 30, delay: 5});

    let senSmall = document.getElementById('body_sensor');
    let rect = senSmall.getBoundingClientRect();
    let calcY = rect.y;
    
    console.log(calcY);

    tl.fromTo(".img-sensor", {scale: 1, y: 0}, {scale: 0.25, x: 65, y: 700, rotationY: 10, skewY: 2, duration: 30})
    .to(".img-sensor", {opacity: 0})
    .to(".transp_man", 25, {opacity: 0, ease: Circ.easeOut, y: -10, duration: 15}, "+=5") ;
    
    
    tl2
    .set("#logo_screen", {opacity: 0}, "+=5")
    .fromTo(".colored_man", {opacity: 0}, {opacity: 1, ease: Circ.easeOut, y: 10, duration: 30, delay: 5}, "+=5")
    .fromTo("#transparent_Sensor_belt", {opacity: 0.7}, {opacity: 0.6, duration: 60})
    .fromTo("#transparent_Sensor_belt", {opacity: 0.7}, {opacity: 0, duration: 60})
    .fromTo("#transparent_Sensor_belt", {opacity: 0.2}, {opacity: 0.6, duration: 60})
    .fromTo("#transparent_Sensor_belt", {opacity: 0.7}, {opacity: 0.6, duration: 60})
    .from("#device_light_window", {opacity:0, delay: 1, scale: .2, transformOrigin:'bottom', duration: 30}, "=.5")
    .from("#heartrate_line", {opacity:0, ease: Elastic.easeOut.config(1 , 0.3), y: -20, duration: 30}, "=1")
    .from("#icon_1", {opacity:0, delay: 1, scale: .2, transformOrigin:'bottom', duration: 60}, "=1")
    .from("#icon_2", {opacity:0, delay: 1, scale: .2, transformOrigin:'bottom', duration: 60}, "=1")
    .from("#icon_3", {opacity:0, delay: 1, scale: .2, transformOrigin:'bottom', duration: 60}, "=1");
    
    ScrollTrigger.create({
        animation: tl,
        trigger: "#animated-section",
        start: "top 15%",
        end: "center 20%",
        scrub: 0.5,
    //    markers: true
    //    duration: 20
    //    pin: true
    });

    ScrollTrigger.create({
    animation: tl2,
    trigger: "#animated-section",
    start: "center 20%",
 //   markers: true,
    scrub: 0.5,
    pin: true
    });

    //animation of the progress bar
    var logo1 = CSSRulePlugin.getRule(".logo-part1"); //get the rule
    tl4.to(logo1, {cssRule: {filter: "opacity(1)"}}, ScrollTrigger.create({
        animation: tl4,
        trigger: "#home",
        start: "bottom top",
    //    markers: true
    }));

    ScrollTrigger.create({
        animation: tl4,
        trigger: "#home",
        start: "top top",
    //       markers: true,
        scrub: 0.2
    });

    var logo2 = gsap.fromTo(".logo-part2", {opacity: 0}, {opacity: 1}); //get the rule
    ScrollTrigger.create({
        animation: logo2,
        trigger: "#about_tech",
        start: "top bottom",
 //       markers: true,
        scrub: 0.3
    });

    var logo3 = gsap.fromTo(".logo-part2", {opacity: 0}, {opacity: 1});
    ScrollTrigger.create({
        animation: logo3,
        trigger: "#quote",
        start: "top bottom",
 //       markers: true,
        scrub: 0.2
    });

    var logo4 = gsap.fromTo(".logo-part3", {opacity: 0}, {opacity: 1});
    ScrollTrigger.create({
        animation: logo4,
        trigger: "#animated-section",
        start: "top bottom 30%",
 //       markers: true,
        scrub: 0.2
    });

</script>

<script>
    window.addEventListener('load',function() {
        figure = document.getElementById('multiSlide');
        leftButton      = document.getElementById('left');
        rightButton     = document.getElementById('right'); 
        
        new Box(-2,2, 'https://www.linkpicture.com/q/app-screens-1.png');  
        new Box(-1,2,'https://www.linkpicture.com/q/app-screens-2.png'); 
        new Box(0,2,'https://www.linkpicture.com/q/app-screens-3.png'); 
        new Box(1,2,'https://www.linkpicture.com/q/app-screens-1.png');
        new Box(2,2,'https://www.linkpicture.com/q/app-screens-2.png');
        new Box(3,2,'https://www.linkpicture.com/q/app-screens-3.png');
        new Box(4,2,'https://www.linkpicture.com/q/app-screens-1.png');
        new Box(5,2,'https://www.linkpicture.com/q/app-screens-2.png');			

        rightButton.addEventListener('click', function(){
            if(slidePosX>-3)
                slide('X',-1);
        });
        leftButton.addEventListener('click', function(){
            if(slidePosX<4)
                slide('X',1);
        });
    });

    var unit            = 270;
    var registeredBoxes = [];
    var slidePosX       = 0;
    var Box = function(posX,posY,img){
        this.pos    = {};
        this.pos.X  = posX;
        this.pos.Y  = posY;
        this.img    = img;
        this.init();
    }
    Box.prototype = {
        init : function(){
            this.DOMElement             = document.createElement('div');
            this.DOMElement.className   = 'box';
              this.DOMElement.style.left  = (this.pos.X*unit)-unit+'px';
             this.DOMElement.style.top   = (this.pos.Y*unit / 2)-unit+30+'px';
            this.DOMElement.setAttribute('data-pos',this.pos.X.toString()+this.pos.Y.toString());
            
            var img = document.createElement('img');
            img.src = this.img;
            
            this.DOMElement.appendChild(img);
            figure.appendChild(this.DOMElement);
            registeredBoxes.push(this);
        },
        setPosition : function(axis,val){
            this.pos[axis] = val;						
            this.DOMElement.style.left  = (this.pos[axis]*unit)-unit+'px';						
            this.DOMElement.setAttribute('data-pos',this.pos.X.toString()+this.pos.Y.toString());
        }
    }

    function slide(axis,dir){
        var len = registeredBoxes.length;				
        for(var i=0; i<len; i++){
            if(registeredBoxes[i].pos['Y']=='2'){
                registeredBoxes[i].setPosition(axis,registeredBoxes[i].pos['X']+(1*dir));
            }
        }
        slidePosX = slidePosX+dir;				
    }
</script>